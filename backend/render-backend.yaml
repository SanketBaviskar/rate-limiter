services:
    # Backend Service
    - type: web
      name: rate-limiter-api
      env: docker
      rootDir: backend
      plan: free
      dockerFilePath: Dockerfile
      envVars:
          - key: REDIS_URL
            fromService:
                type: redis
                name: rate-limiter-redis
                property: connectionString
          - key: PORT
            value: 8000

    # Redis Service
    - type: redis
      name: rate-limiter-redis
      plan: free
      ipAllowList: [] # Allow all internal connections
